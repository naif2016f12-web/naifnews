<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุญุฉ ุงูุชุญูู | NaifNews Admin</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="admin_style.css">
    <!-- Using a simple FontAwesome alternative or SVG icons inline for performance/simplicity, but here specific simple SVGs will be used in code is better or emojis for simplicity unless requested otherwise. Using unicode icons/SVGs is safer than external CDN links if internet is flaky, but CDNs are standard. Let's use simple SVGs for a premium feel. -->
</head>

<body>

    <div class="dashboard-container">

        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>Naif<span>Admin</span></h2>
            </div>

            <div class="admin-profile">
                <img src="assets/admin_avatar.png" alt="Admin">
                <div class="admin-info">
                    <h4>ูุงูู ุงูููุตูุฑู</h4>
                    <small>ุงููุฏูุฑ ุงูุนุงู</small>
                </div>
            </div>

            <nav class="sidebar-nav">
                <ul>
                    <li>
                        <a href="#" class="nav-link active" data-target="overview">
                            <span class="icon">๐</span>
                            <span class="text">ุงูุฑุฆูุณูุฉ</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-target="articles">
                            <span class="icon">๐</span>
                            <span class="text">ุงูููุงูุงุช</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-target="users">
                            <span class="icon">๐ฅ</span>
                            <span class="text">ุงููุณุชุฎุฏููู</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-target="comments">
                            <span class="icon">๐ฌ</span>
                            <span class="text">ุงูุชุนูููุงุช</span>
                            <span class="badge">5</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-target="settings">
                            <span class="icon">โ๏ธ</span>
                            <span class="text">ุงูุฅุนุฏุงุฏุงุช</span>
                        </a>
                    </li>
                </ul>
            </nav>

            <div class="sidebar-footer">
                <a href="index.html" class="logout-btn">
                    <span class="icon">๐ช</span>
                    <span class="text">ุชุณุฌูู ุฎุฑูุฌ</span>
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">

            <!-- Top Bar -->
            <header class="top-bar">
                <div class="top-left">
                    <button id="toggle-sidebar" aria-label="Toggle Menu">โฐ</button>
                    <div class="search-box">
                        <span class="search-icon">๐</span>
                        <input id="dashboard-search" type="text" placeholder="ุจุญุซ ูู ููุญุฉ ุงูุชุญูู...">
                    </div>
                </div>
                <div class="top-actions">
                    <!-- New: Current user selector (impersonate/test) -->
                    <div style="display:flex;align-items:center;gap:8px;margin-inline-start:12px;">
                        <label for="current-user-select" style="font-weight:600;color:var(--text-muted);">ุงููุณุชุฎุฏู:</label>
                        <select id="current-user-select" style="padding:6px;border-radius:6px;">
                            <!-- populated by JS -->
                        </select>
                    </div>

                    <button id="run-audit-btn" class="icon-btn" title="ูุญุต ุฃุนูู ูููููุน">๐งญ ูุญุต ุงููููุน</button>
                    <button id="admin-theme-toggle" class="icon-btn" aria-label="ุชุบููุฑ ุงููุถุน">๐</button>
                    <button class="icon-btn" aria-label="Notifications">๐ <span class="dot"></span></button>
                    <button id="open-new-post-btn" class="add-new-btn">+ ููุงู ุฌุฏูุฏ</button>
                </div>
            </header>

            <!-- Dashboard Content -->
            <div class="content-wrapper">

                <!-- Audit Panel (hidden until run) -->
                <div id="audit-panel" class="card" style="display:none; margin-bottom:20px;">
                    <div class="card-header">
                        <h3>ูุชูุฌุฉ ุงููุญุต ุงูุนููู</h3>
                        <div>
                            <button id="audit-export-btn" class="btn-primary" style="margin-left:8px;">ุชุตุฏูุฑ JSON</button>
                            <button id="audit-clear-btn" class="btn-secondary">ุฅุฎูุงุก</button>
                        </div>
                    </div>
                    <div id="audit-results" style="padding:16px; font-size:0.95rem; color:var(--text-main); max-height:360px; overflow:auto;">
                        <!-- results injected here -->
                    </div>
                </div>

                <!-- Section: Overview -->
                <section id="section-overview" class="dashboard-section active">
                    <div class="page-header">
                        <h2 class="page-title">ูุธุฑุฉ ุนุงูุฉ</h2>
                        <div class="date-filter">
                            <select>
                                <option>ุงูููู</option>
                                <option>ุขุฎุฑ 7 ุฃูุงู</option>
                                <option selected>ุขุฎุฑ 30 ููู</option>
                                <option>ูุฐุง ุงูุนุงู</option>
                            </select>
                        </div>
                    </div>

                    <!-- Main Chart Section -->
                    <div class="card chart-card full-width">
                        <div class="card-header">
                            <h3>ุฅุญุตุงุฆูุงุช ุงูุฒูุงุฑ (Live)</h3>
                            <div class="chart-legend">
                                <span class="dot-legend visitors"></span> ุฒูุงุฑ
                                <span class="dot-legend views"></span> ูุดุงูุฏุงุช
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="visitorsChart" height="300"></canvas>
                        </div>
                    </div>

                    <!-- Stats Cards -->
                    <div class="stats-grid">
                        <div class="stat-card blue">
                            <div class="stat-icon">๐๏ธ</div>
                            <div class="stat-info">
                                <!-- id added -->
                                <h3 id="stat-visits">120,500</h3>
                                <p>ุฒูุงุฑุงุช ูุฐุง ุงูุดูุฑ</p>
                            </div>
                            <div class="stat-trend up">
                                <span>+15%</span> โ
                            </div>
                        </div>
                        <div class="stat-card green">
                            <div class="stat-icon">๐</div>
                            <div class="stat-info">
                                <!-- id added -->
                                <h3 id="stat-articles">45</h3>
                                <p>ููุงู ููุดูุฑ</p>
                            </div>
                            <div class="stat-trend up">
                                <span>+5</span> โ
                            </div>
                        </div>
                        <div class="stat-card purple">
                            <div class="stat-icon">๐ฅ</div>
                            <div class="stat-info">
                                <!-- id added -->
                                <h3 id="stat-subscribers">1,200</h3>
                                <p>ูุดุชุฑู ุฌุฏูุฏ</p>
                            </div>
                            <div class="stat-trend down">
                                <span>-2%</span> โ
                            </div>
                        </div>
                        <div class="stat-card orange">
                            <div class="stat-icon">๐ฐ</div>
                            <div class="stat-info">
                                <!-- id added -->
                                <h3 id="stat-revenue">$5,400</h3>
                                <p>ุงูุฃุฑุจุงุญ ุงูููุฏุฑุฉ</p>
                            </div>
                            <div class="stat-trend up">
                                <span>+8%</span> โ
                            </div>
                        </div>
                    </div>

                    <!-- Recent Activity & Charts Area -->
                    <div class="split-section">

                        <!-- Recent Articles Table -->
                        <div class="card table-card">
                            <div class="card-header">
                                <h3>ุขุฎุฑ ุงูููุงูุงุช</h3>
                                <a href="#"
                                    onclick="document.querySelector('[data-target=\'articles\']').click(); return false;"
                                    class="more-link">ุนุฑุถ ุงููู</a>
                            </div>
                            <div class="table-responsive">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>ุงูุนููุงู</th>
                                            <th>ุงููุงุชุจ</th>
                                            <th>ุงูุชุงุฑูุฎ</th>
                                            <th>ุงูุญุงูุฉ</th>
                                            <th>ุงูุฅุฌุฑุงุกุงุช</th>
                                        </tr>
                                    </thead>
                                    <!-- added id to tbody for JS targeting -->
                                    <tbody id="articles-table-body">
                                        <!-- Dynamic Content Loaded via JS -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Quick Stats / Systems -->
                        <div class="card system-card">
                            <div class="card-header">
                                <h3>ุฃุฏุงุก ุงูุฎุงุฏู</h3>
                            </div>
                            <div class="server-stats">
                                <div class="stat-item">
                                    <div class="stat-label">
                                        <span>CPU Usage</span>
                                        <span>24%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress" style="width: 24%; background: #3b82f6;"></div>
                                    </div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-label">
                                        <span>Memory</span>
                                        <span>58%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress" style="width: 58%; background: #10b981;"></div>
                                    </div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-label">
                                        <span>Storage</span>
                                        <span>85%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress" style="width: 85%; background: #f59e0b;"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="quick-tasks">
                                <h3>ููุงู ุณุฑูุนุฉ</h3>
                                <ul class="task-list">
                                    <li>
                                        <input type="checkbox" id="task1" checked>
                                        <label for="task1">ูุฑุงุฌุนุฉ ุชุนูููุงุช ุงูุฃูุณ</label>
                                    </li>
                                    <li>
                                        <input type="checkbox" id="task2">
                                        <label for="task2">ุชุญุฏูุซ ุณูุงุณุฉ ุงูุฎุตูุตูุฉ</label>
                                    </li>
                                </ul>
                            </div>
                        </div>

                    </div>
                </section>

                <!-- Section: Articles -->
                <section id="section-articles" class="dashboard-section" style="display: none;">
                    <h2 class="page-title">ุฅุฏุงุฑุฉ ุงูููุงูุงุช</h2>
                    <div class="card">
                        <div class="card-header">
                            <h3>ุฌููุน ุงูููุงูุงุช</h3>
                            <button class="add-new-btn small"
                                onclick="document.getElementById('open-new-post-btn').click()">+ ุฅุถุงูุฉ</button>
                        </div>
                        <div style="padding: 50px; text-align: center; color: var(--text-muted);">
                            <span style="font-size: 3rem;">๐</span>
                            <p>ููุง ุณุชุธูุฑ ูุงุฆูุฉ ุงูููุงูุงุช ุงููุงููุฉ ูุน ุฎูุงุฑุงุช ุงูุชุนุฏูู ูุงูุญุฐู ุงููุชูุฏูุฉ.</p>
                        </div>
                    </div>
                </section>

                <!-- Section: Users -->
                <section id="section-users" class="dashboard-section" style="display: none;">
                    <h2 class="page-title">ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</h2>
                    <div class="card">
                        <div class="card-header">
                            <h3>ูุงุฆูุฉ ุงูุฃุนุถุงุก</h3>
                            <button id="open-new-user-btn" class="add-new-btn small"
                                onclick="document.getElementById('new-user-modal').classList.add('active')">+ ุนุถู
                                ุฌุฏูุฏ</button>
                        </div>
                        <div class="table-responsive">
                            <table id="users-table">
                                <thead>
                                    <tr>
                                        <th>ุงูุงุณู</th>
                                        <th>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</th>
                                        <th>ุงูุตูุงุญูุฉ</th>
                                        <th>ุชุงุฑูุฎ ุงูุงูุถูุงู</th>
                                        <th>ุงูุฅุฌุฑุงุกุงุช</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Dynamic User Content -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Section: Comments -->
                <section id="section-comments" class="dashboard-section" style="display: none;">
                    <h2 class="page-title">ุฅุฏุงุฑุฉ ุงูุชุนูููุงุช</h2>
                    <div class="card">
                        <div class="card-header">
                            <h3>ุงูุชุนูููุงุช ุงููุงุฑุฏุฉ</h3>
                            <span class="badge" id="pending-comments-count"
                                style="background:var(--warning); color:#fff; padding:2px 8px; border-radius:10px;">0
                                ุฌุฏูุฏ</span>
                        </div>
                        <div class="table-responsive">
                            <table class="comments-table">
                                <thead>
                                    <tr>
                                        <th>ุงูุงุณู</th>
                                        <th>ุงูุชุนููู</th>
                                        <th>ุงูููุงู</th>
                                        <th>ุงูุญุงูุฉ</th>
                                        <th>ุงูุฅุฌุฑุงุกุงุช</th>
                                    </tr>
                                </thead>
                                <tbody id="comments-table-body">
                                    <!-- Comments loaded via JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Section: Settings -->
                <section id="section-settings" class="dashboard-section" style="display: none;">
                    <h2 class="page-title">ุฅุนุฏุงุฏุงุช ุงููููุน</h2>
                    <div class="card">
                        <!-- News Ticker Settings -->
                        <h3 style="margin-bottom: 15px; color: var(--primary-color);">๐ข ุดุฑูุท ุงูุฃุฎุจุงุฑ ุงูุนุงุฌูุฉ</h3>
                        <div class="form-group">
                            <label>ูุตู ุงูุดุฑูุท ุงููุชุญุฑู</label>
                            <textarea id="settings-ticker-text" rows="2"
                                placeholder="ุฃุฏุฎู ุงูุฃุฎุจุงุฑ ุงูุนุงุฌูุฉ ููุง ููุตููุฉ ุจููุงุตู..."></textarea>
                            <small style="color: var(--text-muted);">ุณูุธูุฑ ูุฐุง ุงููุต ูู ุงูุดุฑูุท ุงูุนููู ูููููุน
                                ููุฑุงู.</small>
                        </div>
                        <hr style="margin: 20px 0; border-color: var(--border-color);">

                        <div class="form-group">
                            <label>ุงุณู ุงููููุน</label>
                            <input type="text" value="NaifNews">
                        </div>
                        <div class="form-group">
                            <label>ูุบุฉ ุงููููุน</label>
                            <select>
                                <option>ุงูุนุฑุจูุฉ</option>
                                <option>English</option>
                            </select>
                        </div>

                        <!-- New: Design Controls -->
                        <hr style="margin:20px 0;">
                        <h3 style="margin-bottom:12px;">ุชุตููู ุงููููุน</h3>
                        <div class="design-panel">
                            <div class="form-row">
                                <label>ุงูููู ุงูุฑุฆูุณู</label>
                                <input id="design-primary" type="color" value="#2563eb">
                            </div>
                            <div class="form-row">
                                <label>ุฎูููุฉ ุงูููุฏุฑ</label>
                                <input id="design-headerbg" type="color" value="#ffffff">
                            </div>
                            <div class="form-row">
                                <label>ุฎูููุฉ ุงูุจุทุงูุงุช</label>
                                <input id="design-cardbg" type="color" value="#ffffff">
                            </div>
                            <div class="form-row">
                                <label>ุงูุฎุท</label>
                                <select id="design-font">
                                    <option value="Tajawal, sans-serif" selected>Tajawal</option>
                                    <option value="Arial, sans-serif">Arial</option>
                                    <option value="system-ui, sans-serif">System</option>
                                </select>
                            </div>
                            <div class="form-row">
                                <label>ูุตู ูุทุฑ ุงูุจุทุงูุงุช (px)</label>
                                <input id="design-cardradius" type="range" min="0" max="30" value="12">
                                <span id="design-cardradius-value">12</span>
                            </div>
                            <div class="form-row">
                                <label>ุงููุถุน ุงูุฏุงูู</label>
                                <input id="design-darkmode" type="checkbox">
                            </div>

                            <div style="margin-top:12px; display:flex; gap:8px;">
                                <button id="design-apply" class="btn-primary">ุชุทุจูู ูุคูุช</button>
                                <button id="design-save" class="btn-primary">ุญูุธ ุงูุชุบููุฑุงุช</button>
                                <button id="design-reset" class="btn-secondary">ุฅุนุงุฏุฉ ุงูุชุนููู</button>
                            </div>
                        </div>
                        <!-- End Design Controls -->

                        <div style="margin-top:20px;">
                            <button class="btn-primary">ุญูุธ ุงูุชุบููุฑุงุช</button>
                        </div>
                    </div>
                </section>

            </div>
        </main>
    </div>

    <!-- New Post Modal -->
    <div class="modal" id="new-post-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="new-post-title">ุฅุถุงูุฉ ููุงู ุฌุฏูุฏ</h3>
                <button class="close-modal"
                    onclick="document.getElementById('new-post-modal').classList.remove('active')">&times;</button>
            </div>
            <form id="new-post-form" enctype="multipart/form-data">
                <!-- hidden id for edit mode -->
                <input type="hidden" name="articleId" id="article-id" value="">
                <div class="form-group">
                    <label>ุนููุงู ุงูููุงู</label>
                    <input id="article-title" type="text" name="title" required placeholder="ุฃุฏุฎู ุนููุงูุงู ุฌุฐุงุจุงู...">
                </div>
                <div class="form-group">
                    <label>ุงููุณู</label>
                    <select id="article-category" name="category">
                        <option>ุณูุงุณุฉ</option>
                        <option>ุชูููููุฌูุง</option>
                        <option>ุฑูุงุถุฉ</option>
                        <option>ุงูุชุตุงุฏ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ููุชุทู ูุตูุฑ</label>
                    <textarea id="article-excerpt" name="excerpt" rows="3" placeholder="ูุตู ูุฎุชุตุฑ ููููุงู"></textarea>
                </div>

                <!-- Image upload -->
                <div class="form-group">
                    <label>ุตูุฑุฉ ุงูููุงู (ุงุฎุชูุงุฑู)</label>
                    <input id="article-image" name="image" type="file" accept="image/*">
                    <div style="margin-top:8px;">
                        <img id="article-image-preview" src="" alt="ูุนุงููุฉ ุงูุตูุฑุฉ"
                            style="max-width:160px; display:none; border-radius:8px;" />
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn-secondary close-modal-btn"
                        onclick="document.getElementById('new-post-modal').classList.remove('active')">ุฅูุบุงุก</button>
                    <button type="submit" class="btn-primary" id="save-article-btn">ูุดุฑ ุงูููุงู</button>
                </div>
            </form>
        </div>
    </div>

    <!-- New User Modal -->
    <div class="modal" id="new-user-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ุฅุถุงูุฉ ุนุถู ุฌุฏูุฏ</h3>
                <button class="close-modal"
                    onclick="document.getElementById('new-user-modal').classList.remove('active')">&times;</button>
            </div>
            <form id="new-user-form">
                <div class="form-group">
                    <label>ุงูุงุณู ุงููุงูู</label>
                    <input type="text" required placeholder="ูุซุงู: ูุญูุฏ ุนูู">
                </div>
                <div class="form-group">
                    <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                    <input type="email" required placeholder="name@example.com">
                </div>
                <div class="form-group">
                    <label>ุงูุตูุงุญูุฉ</label>
                    <select>
                        <option value="ูุญุฑุฑ">ูุญุฑุฑ</option>
                        <option value="ูุดุฑู">ูุดุฑู</option>
                        <option value="ูุฏูุฑ">ูุฏูุฑ</option>
                    </select>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-secondary close-modal-btn"
                        onclick="document.getElementById('new-user-modal').classList.remove('active')">ุฅูุบุงุก</button>
                    <button type="submit" class="btn-primary">ุฅุถุงูุฉ ุงูุนุถู</button>
                </div>
            </form>
        </div>
    </div>

    <script src="admin_script.js"></script>
</body>

</html>